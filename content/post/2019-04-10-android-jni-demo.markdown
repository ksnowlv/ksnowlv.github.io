---
title: "Android jni示例"
date: 2019-04-10
lastmod: 2019-04-10
categories:
  - "Android"
tags:
  - "jni"
  - “C++”
comment: true
toc: true
autoCollapseToc: false
reward: true
mathjax: false
---


## 1.so库拷贝到相应目录
创建`app/src/main/jniLibs`目录，把so库拷贝到`jniLibs`目录。

## 2.Android上层调用so库

`JavaCallJNI`

``` java

public class JavaCallJNI {

    static  {
        System.loadLibrary("JNITest");
    }


    public static native int showValue(int value);

}

```


## 3.JNI接口定义


`com_ksnowlv_hellojniforjava_JavaCallJNI.h`

```c

/* DO NOT EDIT THIS FILE - it is machine generated */

#include <jni.h>

/* Header for class com_ksnowlv_hellojniforjava_JavaCallJNI */

#ifndef _Included_com_ksnowlv_hellojniforjava_JavaCallJNI

#define _Included_com_ksnowlv_hellojniforjava_JavaCallJNI

#ifdef __cplusplus

extern "C" {

#endif
/*
 * Class:     com_ksnowlv_hellojniforjava_JavaCallJNI
 * Method:    showValue
 * Signature: (I)I
 */

JNIEXPORT jint JNICALL Java_com_ksnowlv_hellojniforjava_JavaCallJNI_showValue
  (JNIEnv *, jclass, jint);
  
  #ifdef __cplusplus
}

#endif

#endif

```


## 4..c实现文件 


`com_ksnowlv_hellojniforjava_JavaCallJNI.c`内容如下：

```c

#include "com_ksnowlv_hellojniforjava_JavaCallJNI.h"
#include "PersonExtension.hpp"
#include "JNILog.h"


JNIEXPORT jint JNICALL Java_com_ksnowlv_hellojniforjava_JavaCallJNI_showValue
  (JNIEnv * enc, jclass cls , jint value) {

    LOGI("jni value = %d",value);
	value = value + 1;
	LOGI("jni value +1 = %d",value);
    return value;
  }
  
```
  
## 5.Android中调用

```java
      int value =  JavaCallJNI.showValue(1);
      Log.e("#### value ","" + value);
```

